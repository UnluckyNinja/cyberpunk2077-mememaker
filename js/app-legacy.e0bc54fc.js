(function(e){function t(t){for(var a,o,s=t[0],c=t[1],u=t[2],f=0,p=[];f<s.length;f++)o=s[f],n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},i=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"0db9":function(e,t,r){"use strict";var a=r("40a9"),n=r.n(a);n.a},"40a9":function(e,t,r){},5339:function(e,t,r){e.exports=r.p+"img/cyberpunk_zh.2bea1920.png"},"5c0b":function(e,t,r){"use strict";var a=r("5e27"),n=r.n(a);n.a},"5e27":function(e,t,r){},c69f:function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("el-container",{staticStyle:{"min-height":"100vh"}},[r("el-header",{staticClass:"header vertical-center"},[e._v("赛博朋克2077沙雕图生成器")]),r("el-main",{staticClass:"main"},[r("MemeMaker")],1),r("el-footer",{staticClass:"footer vertical-center"},[e._v("© 2019 UnluckyNinja")])],1)],1)},i=[],o=r("d225"),s=r("308d"),c=r("6bb5"),u=r("4e2b"),l=r("9ab4"),f=r("60a3"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper",on:{paste:e.pasteImage}},[r("div",{staticClass:"flex-horizontal"},[r("el-button",{attrs:{type:"primary",disabled:e.currentStep<=0},on:{click:e.previous}},[e._v("上一步")]),r("el-button",{attrs:{type:"primary",disabled:e.currentStep>=2},on:{click:e.next}},[e._v("下一步")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:0==e.currentStep,expression:"currentStep == 0"}],key:"0",staticClass:"mememaker filepicker vertical-center"},[0==e.currentStep?r("el-upload",{attrs:{drag:"",action:"nowhere",accept:"image/*",limit:1,"auto-upload":!1,"show-file-list":!0,"on-change":e.changeImage}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text"},[e._v("\n        将文件拖到此处，或\n        "),r("em",[e._v("点击上传")]),e._v("\n        或在正文区域粘贴（CTRL+V）\n      ")])]):e._e()],1),r("div",{directives:[{name:"show",rawName:"v-show",value:1==e.currentStep,expression:"currentStep == 1"}],key:"1",staticClass:"mememaker editor flex-column"},[r("el-radio-group",{on:{change:e.changeLogo},model:{value:e.logo,callback:function(t){e.logo=t},expression:"logo"}},[r("el-radio",{attrs:{border:"",label:"zh"}},[e._v("中文")]),r("el-radio",{attrs:{border:"",label:"en"}},[e._v("English")])],1),r("v-stage",{ref:"stage",staticClass:"horizontal-center",attrs:{config:{width:100,height:100}}},[r("v-layer",[e.finishedLoadImage?r("v-image",{attrs:{config:{width:e.image.naturalWidth,height:e.image.naturalHeight,image:e.image}}}):e._e()],1),r("v-layer",{ref:"logoLayer"})],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:2==e.currentStep,expression:"currentStep == 2"}],key:"2",staticClass:"mememaker result horizontal-center"},[e.outputImage?r("el-image",{staticStyle:{width:"fit-content",height:"fit-content"},attrs:{src:e.outputImage.src,fit:"none"}}):e._e()],1),r("el-steps",{staticClass:"step",attrs:{active:e.currentStep,"finish-status":"success","align-center":""}},[r("el-step",{attrs:{title:"选择图片"}}),r("el-step",{attrs:{title:"沙雕炼成"}}),r("el-step",{attrs:{title:"复制图片"}})],1)],1)},h=[],g=(r("f559"),r("ac4d"),r("8a81"),r("ac6a"),r("96cf"),r("3b8d")),d=(r("7514"),r("b0b4")),m=r("362d"),v=r.n(m),b=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(s["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.target="",e.currentStep=0,e.image=new Image,e.finishedLoadImage=!1,e.logo="en",e.outputImage=null,e}return Object(u["a"])(t,e),Object(d["a"])(t,[{key:"next",value:function(){var e=this;this.currentStep<2&&this.currentStep++,1===this.currentStep&&this.changeLogo(this.logo),2===this.currentStep&&(this.clearTransform(),this.stage.toImage({callback:function(t){e.outputImage=t}}))}},{key:"clearTransform",value:function(){this.stage.find("Transformer").each(function(e){e.destroy()})}},{key:"mounted",value:function(){var e=this;this.stage.on("click tap",function(t){if(!t.target.hasName("logo"))return e.clearTransform(),void e.logoLayer.draw();e.stage.find("Transformer").each(function(e){e.destroy()});var r=new v.a.Transformer;e.logoLayer.add(r),r.attachTo(t.target),e.logoLayer.draw()})}},{key:"previous",value:function(){this.currentStep>0&&this.currentStep--}},{key:"pasteImage",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var r,a,n,i,o,s,c,u,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=!0,n=!1,i=void 0,e.prev=3,o=t.clipboardData.items[Symbol.iterator]();case 5:if(a=(s=o.next()).done){e.next=13;break}if(c=s.value,!c||!c.type.startsWith("image")){e.next=10;break}return r=c,e.abrupt("break",13);case 10:a=!0,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](3),n=!0,i=e.t0;case 19:e.prev=19,e.prev=20,a||null==o.return||o.return();case 22:if(e.prev=22,!n){e.next=25;break}throw i;case 25:return e.finish(22);case 26:return e.finish(19);case 27:if(r){e.next=29;break}return e.abrupt("return");case 29:if(u=r.getAsFile(),u){e.next=34;break}return l=this,l.$message({showClose:!0,message:"图片文件错误，如果从QQ聊天中复制，请对双击图片后的大图右键复制",type:"error"}),e.abrupt("return");case 34:return e.next=36,this.loadImage(u);case 36:this.next();case 37:case"end":return e.stop()}},e,this,[[3,15,19,27],[20,,22,26]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"changeImage",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t&&t.raw){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.loadImage(t.raw);case 4:return this.next(),e.abrupt("return",!0);case 6:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"loadImage",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var r,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return""!==this.image.src&&(URL.revokeObjectURL(this.image.src),this.image.removeAttribute("src")),r=new Promise(function(e,t){return a.image.addEventListener("load",function(){var t=a.$refs.stage;t=t.getNode(),t.width(a.image.naturalWidth),t.height(a.image.naturalHeight),a.finishedLoadImage=!0,a.stage.draw(),e(!0)})}),this.image.src=URL.createObjectURL(t),e.abrupt("return",r);case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"changeLogo",value:function(e){"zh"===e?this.loadLogo(r("5339")):"en"===e&&this.loadLogo(r("d58f"))}},{key:"loadLogo",value:function(e){var t=this,r=new Image;r.addEventListener("load",function(){var e=.8*t.stage.width()/r.naturalWidth,a=new v.a.Image({name:"logo",image:r,draggable:!0,x:(t.stage.width()-r.naturalWidth*e)/2,y:.9*(t.stage.height()-r.naturalHeight*e)});a.scale({x:e,y:e}),a.transformsEnabled(),t.logoLayer.removeChildren(),t.logoLayer.add(a),t.logoLayer.draw()}),r.src=e}},{key:"stage",get:function(){var e=this.$refs.stage;return e.getNode()}},{key:"logoLayer",get:function(){var e=this.$refs.logoLayer;return e.getNode()}}]),t}(f["b"]);b=l["a"]([Object(f["a"])({components:{}})],b);var y=b,w=y,k=(r("0db9"),r("2877")),x=Object(k["a"])(w,p,h,!1,null,"2cf2f9cc",null),j=x.exports,O=function(e){function t(){return Object(o["a"])(this,t),Object(s["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),t}(f["b"]);O=l["a"]([Object(f["a"])({components:{MemeMaker:j}})],O);var S=O,_=S,L=(r("5c0b"),Object(k["a"])(_,n,i,!1,null,null,null)),I=L.exports,C=r("2f62");a["default"].use(C["a"]);var R=new C["a"].Store({state:{},mutations:{},actions:{}}),T=r("5c96"),M=r.n(T);r("c69f");a["default"].use(M.a);var N=r("7591"),P=r.n(N);a["default"].use(P.a),a["default"].config.productionTip=!1,new a["default"]({store:R,render:function(e){return e(I)}}).$mount("#app")},d58f:function(e,t,r){e.exports=r.p+"img/cyberpunk_en.28275215.png"}});
//# sourceMappingURL=app-legacy.e0bc54fc.js.map