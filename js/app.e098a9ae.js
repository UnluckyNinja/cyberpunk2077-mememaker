(function(e){function t(t){for(var r,i,o=t[0],c=t[1],l=t[2],g=0,h=[];g<o.length;g++)i=o[g],s[i]&&h.push(s[i][0]),s[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(r=!1)}r&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},s={app:0},n=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/cyberpunk2077-mememaker/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"0408":function(e,t,a){"use strict";var r=a("8efe"),s=a.n(r);s.a},"2c61":function(e){e.exports={app:{footer:"CD PROJEKT®, Cyberpunk®, Cyberpunk 2077® are registered trademarks of CD PROJEKT S.A. © 2019 UnluckyNinja",title:"赛博朋克2077 沙雕图生成器"},steps:{button:{next:"下一步",previous:"上一步",save:"保存图片"},processing:"图片生成中",step1:"选择图片",step2:"沙雕炼成",step3:"复制图片"},upload:{click_here:"点击这里",description:"将文件拖到此处，或{click}{newline}你也可以复制图片，然后点击正文区域并粘贴（CTRL+V）"}}},"49f8":function(e,t,a){var r={"./en.json":"edd4","./zh-cn.json":"2c61"};function s(e){var t=n(e);return a(t)}function n(e){var t=r[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}s.keys=function(){return Object.keys(r)},s.resolve=n,e.exports=s,s.id="49f8"},5339:function(e,t,a){e.exports=a.p+"img/cyberpunk_zh.2bea1920.png"},"5c0b":function(e,t,a){"use strict";var r=a("5e27"),s=a.n(r);s.a},"5e27":function(e,t,a){},"6c38":function(e,t,a){},"7cce":function(e,t,a){"use strict";var r=a("6c38"),s=a.n(r);s.a},"8efe":function(e,t,a){},"9ae8":function(e,t,a){},c618:function(e,t,a){"use strict";var r=a("9ae8"),s=a.n(r);s.a},c69f:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);var r=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",{staticStyle:{"min-height":"100vh"}},[a("el-header",{staticClass:"header vertical-center"},[a("div",[e._v(e._s(e.$t("app.title")))]),a("div",{staticClass:"language-radio"},[a("el-radio-group",{on:{change:e.changeLanguage},model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}},[a("el-radio-button",{attrs:{label:"en"}},[e._v("English")]),a("el-radio-button",{attrs:{label:"zh-cn"}},[e._v("中文")])],1)],1)]),a("el-main",{staticClass:"main"},[a("MemeMaker")],1),a("el-footer",{staticClass:"footer vertical-center"},[a("div",[e._v(e._s(e.$t("app.footer")))])])],1)],1)},n=[],i=a("9ab4"),o=a("60a3"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.processing,expression:"processing",modifiers:{fullscreen:!0}}],staticClass:"maker",attrs:{"element-loading-text":e.$t("steps.processing"),"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-customClass":"loading-overlay"},on:{paste:e.onPaste}},[a("div",{staticClass:"flex-horizontal"},[a("el-button",{attrs:{type:"primary",loading:e.processing,disabled:e.currentStep<=0},on:{click:e.previous}},[e._v(e._s(e.$t("steps.button.previous")))]),a("el-button",{attrs:{type:"primary",loading:e.processing,disabled:e.currentStep>=2||!this.image},on:{click:e.next}},[e._v(e._s(e.$t("steps.button.next")))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.currentStep,expression:"currentStep === 0"}],key:"0",staticClass:"mememaker filepicker vertical-center"},[0===e.currentStep?a("FilePicker",{ref:"filePicker",on:{"image-load":e.imageLoad}}):e._e()],1),a("KonvaEditor",{directives:[{name:"show",rawName:"v-show",value:1===e.currentStep,expression:"currentStep === 1"}],key:"1",ref:"editor",staticClass:"mememaker editor flex-vertical",attrs:{image:e.image}}),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.currentStep,expression:"currentStep === 2"}],key:"2",staticClass:"mememaker result vertical-center"},[""!==e.outputImage?a("el-image",{staticStyle:{"align-self":"center"},attrs:{src:e.outputImage,fit:"contain"}}):e._e(),a("div"),a("div",[a("a",{staticStyle:{},attrs:{href:e.outputImage,download:""}},[a("el-button",{attrs:{type:"success"}},[e._v(e._s(e.$t("steps.button.save")))])],1)])],1),a("el-steps",{staticClass:"step",attrs:{active:e.currentStep,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:e.$t("steps.step1")}}),a("el-step",{attrs:{title:e.$t("steps.step2")}}),a("el-step",{attrs:{title:e.$t("steps.step3")}})],1)],1)},l=[],u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{attrs:{drag:"",action:"nowhere",accept:"image/*",limit:1,"auto-upload":!1,"show-file-list":!0,"on-change":e.changeImage}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[a("i18n",{attrs:{path:"upload.description",tag:"p"}},[a("em",{attrs:{place:"click"}},[e._v(e._s(e.$t("upload.click_here")))]),a("br",{attrs:{place:"newline"}})])],1)])},g=[],h=a("1da1");let p=class extends o["c"]{constructor(){super(...arguments),this.target="",this.image=new Image}pasteImage(e){let t;for(const r of e.clipboardData.items)if(r&&r.type.startsWith("image")){t=r;break}if(!t)return;const a=t.getAsFile();if(a)this.loadImage(a);else{const e=this;e.$message({showClose:!0,message:"图片文件错误，如果从QQ聊天中复制，请对双击图片后的大图右键复制",type:"error"})}}changeImage(e,t){if(e&&e.raw)return this.loadImage(e.raw),!1}loadImage(e){var t=this;return Object(h["a"])(function*(){""!==t.image.src&&(URL.revokeObjectURL(t.image.src),t.image.removeAttribute("src"));const a=new Promise((e,a)=>{return t.image.addEventListener("load",()=>{e(!0)})});t.image.src=URL.createObjectURL(e),a.then(()=>{t.$emit("image-load",t.image)})})()}};p=i["a"]([Object(o["a"])({components:{}})],p);var d=p,m=d,f=(a("c618"),a("2877")),v=Object(f["a"])(m,u,g,!1,null,"1d1526f2",null),b=v.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-radio-group",{on:{change:e.changeLogo},model:{value:e.logo,callback:function(t){e.logo=t},expression:"logo"}},[a("el-radio",{attrs:{border:"",label:"zh"}},[e._v("中文")]),a("el-radio",{attrs:{border:"",label:"en"}},[e._v("English")])],1),a("v-stage",{ref:"stage",staticClass:"horizontal-center",attrs:{config:{width:100,height:100}}},[a("v-layer",[e.finishedLoadImage?a("v-image",{attrs:{config:{width:e.image.naturalWidth,height:e.image.naturalHeight,image:e.image}}}):e._e()],1),a("v-layer",{ref:"logoLayer"})],1)],1)},k=[],w=a("362d"),_=a.n(w);let x=class extends o["c"]{constructor(){super(...arguments),this.finishedLoadImage=!1,this.logo="en",this.oldImageURL=""}get stage(){const e=this.$refs.stage;return e.getNode()}get logoLayer(){const e=this.$refs.logoLayer;return e.getNode()}mounted(){this.stage.on("click tap",e=>{if(!e.target.hasName("logo"))return this.clearTransform(),void this.logoLayer.draw();this.clearTransform();const t=new _.a.Transformer;this.logoLayer.add(t),t.attachTo(e.target),this.logoLayer.draw()})}onImageChange(){this.changeLogo(this.logo);let e=this.$refs.stage;e=e.getNode(),this.resizeCanvas(),this.finishedLoadImage=!0}resizeCanvas(){let e=this.$refs.stage;e=e.getNode();let t=this.$el.clientWidth/this.image.naturalWidth;t>1&&(t=1),e.width(this.image.naturalWidth*t),e.height(this.image.naturalHeight*t),e.scale({x:t,y:t}),e.draw()}changeLogo(e){"zh"===e?this.loadLogo(a("5339")):"en"===e&&this.loadLogo(a("d58f"))}loadLogo(e){const t=new Image;t.addEventListener("load",()=>{const e=this.stage.width()/this.stage.scaleX()*.8/t.naturalWidth,a=new _.a.Image({name:"logo",image:t,draggable:!0,x:(this.stage.width()/this.stage.scaleX()-t.naturalWidth*e)/2,y:.9*(this.stage.height()/this.stage.scaleY()-t.naturalHeight*e)});a.scale({x:e,y:e}),this.logoLayer.removeChildren(),this.logoLayer.add(a),this.logoLayer.draw()}),t.src=e}clearTransform(){this.stage.find("Transformer").each(e=>{e.destroy()})}renderImage(){""!==this.oldImageURL&&(URL.revokeObjectURL(this.oldImageURL),this.oldImageURL=""),this.clearTransform(),this.stage.scale({x:1,y:1}),this.stage.size({width:this.image.naturalWidth,height:this.image.naturalHeight}),this.stage.draw();const e=new Promise(e=>{const t=this.stage.toCanvas({callback:()=>{}});t.toBlob(t=>{const a=URL.createObjectURL(t);this.oldImageURL=a,e(a)})});return e}};i["a"]([Object(o["b"])()],x.prototype,"image",void 0),i["a"]([Object(o["d"])("image")],x.prototype,"onImageChange",null),x=i["a"]([Object(o["a"])({components:{}})],x);var L=x,C=L,S=(a("0408"),Object(f["a"])(C,y,k,!1,null,"571cfa09",null)),O=S.exports;let I=class extends o["c"]{constructor(){super(...arguments),this.currentStep=0,this.image=null,this.outputImage="",this.processing=!1}openImage(){const e=window.open("about:blank","_blank");e&&e.document.write(`<img src="${this.outputImage}"></img>`)}onPaste(e){this.$refs.filePicker.pasteImage(e)}get editor(){return this.$refs.editor}get nextStep(){return this.currentStep+1}get previousStep(){return this.currentStep-1}next(){this.processing=!0,2!==this.nextStep?(this.currentStep<2&&this.currentStep++,this.processing=!1):this.editor.renderImage().then(e=>{this.outputImage=e,this.currentStep++,this.processing=!1})}previous(){if(this.processing=!0,1===this.previousStep)return Promise.resolve().then(()=>{this.editor.resizeCanvas(),this.processing=!1}),void this.currentStep--;this.currentStep>0&&this.currentStep--,this.processing=!1}imageLoad(e){this.image=e,this.next()}};I=i["a"]([Object(o["a"])({components:{FilePicker:b,KonvaEditor:O}})],I);var j=I,$=j,P=(a("7cce"),Object(f["a"])($,c,l,!1,null,"4098a05e",null)),E=P.exports;let R=class extends o["c"]{get locale(){return this.$i18n.locale}set locale(e){this.$i18n.locale=e}changeLanguage(e){this.locale=e}mounted(){navigator.languages[0].includes("zh")||navigator.languages[1].includes("zh")?this.changeLanguage("zh-cn"):this.changeLanguage("en")}};R=i["a"]([Object(o["a"])({components:{MemeMaker:E}})],R);var z=R,U=z,T=(a("5c0b"),Object(f["a"])(U,s,n,!1,null,null,null)),N=T.exports,M=a("2f62");r["default"].use(M["a"]);var D=new M["a"].Store({state:{},mutations:{},actions:{}}),W=a("5c96"),J=a.n(W);a("c69f");r["default"].use(J.a);var K=a("7591"),A=a.n(K),F=(a("4917"),a("ac6a"),a("a925"));function H(){const e=a("49f8"),t={};return e.keys().forEach(a=>{const r=a.match(/([A-Za-z0-9-_]+)\./i);if(r&&r.length>1){const s=r[1];t[s]=e(a)}}),t}r["default"].use(F["a"]);var Q=new F["a"]({locale:"zh-cn",fallbackLocale:"en",messages:H()});r["default"].use(A.a),r["default"].config.productionTip=!1,new r["default"]({store:D,i18n:Q,render:e=>e(N)}).$mount("#app")},d58f:function(e,t,a){e.exports=a.p+"img/cyberpunk_en.28275215.png"},edd4:function(e){e.exports={app:{footer:"CD PROJEKT®, Cyberpunk®, Cyberpunk 2077® are registered trademarks of CD PROJEKT S.A. © 2019 UnluckyNinja",title:"Cyberpunk 2077 Meme Maker"},steps:{button:{next:"Next >",previous:"< Prvev",save:"Save"},processing:"Finalizing image",step1:"Choose a file",step2:"Edit",step3:"Save & Share"},upload:{click_here:"Click Here",description:"Drag file into this area or {click}. {newline}You can also paste an image here (Ctrl-V)."}}}});
//# sourceMappingURL=app.e098a9ae.js.map