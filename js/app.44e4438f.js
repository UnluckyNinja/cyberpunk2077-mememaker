(function(e){function t(t){for(var n,s,o=t[0],c=t[1],l=t[2],g=0,p=[];g<o.length;g++)s=o[g],r[s]&&p.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var c=a[o];0!==r[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={app:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/cyberpunk2077-mememaker/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("cd49")},"153e":function(e,t,a){},"2c61":function(e){e.exports={app:{footer:"CD PROJEKT®, Cyberpunk®, Cyberpunk 2077® are registered trademarks of CD PROJEKT S.A. © 2019 UnluckyNinja",title:"赛博朋克2077 沙雕图生成器"},steps:{button:{next:"下一步",previous:"上一步",save:"保存图片"},processing:"图片生成中",step1:"选择图片",step2:"沙雕炼成",step3:"复制图片"},upload:{click_here:"点击这里",description:"将文件拖到此处，或{click}{newline}你也可以复制图片，然后点击正文区域并粘贴（CTRL+V）"}}},"3ccf":function(e,t,a){"use strict";var n=a("153e"),r=a.n(n);r.a},"49f8":function(e,t,a){var n={"./en.json":"edd4","./zh-cn.json":"2c61"};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id="49f8"},5339:function(e,t,a){e.exports=a.p+"img/cyberpunk_zh.2bea1920.png"},"5c0b":function(e,t,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5e27":function(e,t,a){},"6c38":function(e,t,a){},"7cce":function(e,t,a){"use strict";var n=a("6c38"),r=a.n(n);r.a},"9ae8":function(e,t,a){},c618:function(e,t,a){"use strict";var n=a("9ae8"),r=a.n(n);r.a},c69f:function(e,t,a){},cd49:function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-container",{staticStyle:{"min-height":"100vh"}},[a("el-header",{staticClass:"header vertical-center"},[a("div",[e._v(e._s(e.$t("app.title")))]),a("div",{staticClass:"language-radio"},[a("el-radio-group",{on:{change:e.changeLanguage},model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}},[a("el-radio-button",{attrs:{label:"en"}},[e._v("English")]),a("el-radio-button",{attrs:{label:"zh-cn"}},[e._v("中文")])],1)],1)]),a("el-main",{staticClass:"main"},[a("MemeMaker")],1),a("el-footer",{staticClass:"footer vertical-center"},[a("div",[e._v(e._s(e.$t("app.footer")))])])],1)],1)},i=[],s=(a("6762"),a("2fdb"),a("d225")),o=a("b0b4"),c=a("308d"),l=a("6bb5"),u=a("4e2b"),g=a("9ab4"),p=a("60a3"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:e.processing,expression:"processing",modifiers:{fullscreen:!0}}],staticClass:"maker",attrs:{"element-loading-text":e.$t("steps.processing"),"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)","element-loading-customClass":"loading-overlay"},on:{paste:e.onPaste}},[a("div",{staticClass:"flex-horizontal"},[a("el-button",{attrs:{type:"primary",loading:e.processing,disabled:e.currentStep<=0},on:{click:e.previous}},[e._v(e._s(e.$t("steps.button.previous")))]),a("el-button",{attrs:{type:"primary",loading:e.processing,disabled:e.currentStep>=2||!this.image},on:{click:e.next}},[e._v(e._s(e.$t("steps.button.next")))])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.currentStep,expression:"currentStep === 0"}],key:"0",staticClass:"mememaker filepicker vertical-center"},[0===e.currentStep?a("FilePicker",{ref:"filePicker",on:{"image-load":e.imageLoad}}):e._e()],1),a("KonvaEditor",{directives:[{name:"show",rawName:"v-show",value:1===e.currentStep,expression:"currentStep === 1"}],key:"1",ref:"editor",staticClass:"mememaker editor flex-vertical",attrs:{image:e.image}}),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.currentStep,expression:"currentStep === 2"}],key:"2",staticClass:"mememaker result vertical-center"},[""!==e.outputImage?a("el-image",{staticStyle:{"align-self":"center"},attrs:{src:e.outputImage,fit:"contain"}}):e._e(),a("div"),a("div",[a("a",{staticStyle:{},attrs:{href:e.outputImage,download:""}},[a("el-button",{attrs:{type:"success"}},[e._v(e._s(e.$t("steps.button.save")))])],1)])],1),a("el-steps",{staticClass:"step",attrs:{active:e.currentStep,"finish-status":"success","align-center":""}},[a("el-step",{attrs:{title:e.$t("steps.step1")}}),a("el-step",{attrs:{title:e.$t("steps.step2")}}),a("el-step",{attrs:{title:e.$t("steps.step3")}})],1)],1)},f=[],h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{attrs:{drag:"",action:"nowhere",accept:"image/*",limit:1,"auto-upload":!1,"show-file-list":!0,"on-change":e.changeImage}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[a("i18n",{attrs:{path:"upload.description",tag:"p"}},[a("em",{attrs:{place:"click"}},[e._v(e._s(e.$t("upload.click_here")))]),a("br",{attrs:{place:"newline"}})])],1)])},v=[],m=(a("96cf"),a("3b8d")),b=(a("f559"),a("ac4d"),a("8a81"),a("ac6a"),function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.target="",e.image=new Image,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"pasteImage",value:function(e){var t,a=!0,n=!1,r=void 0;try{for(var i,s=e.clipboardData.items[Symbol.iterator]();!(a=(i=s.next()).done);a=!0){var o=i.value;if(o&&o.type.startsWith("image")){t=o;break}}}catch(u){n=!0,r=u}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}if(t){var c=t.getAsFile();if(c)this.loadImage(c);else{var l=this;l.$message({showClose:!0,message:"图片文件错误，如果从QQ聊天中复制，请对双击图片后的大图右键复制",type:"error"})}}}},{key:"changeImage",value:function(e,t){if(e&&e.raw)return this.loadImage(e.raw),!1}},{key:"loadImage",value:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(t){var a,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:""!==this.image.src&&(URL.revokeObjectURL(this.image.src),this.image.removeAttribute("src")),a=new Promise(function(e,t){return n.image.addEventListener("load",function(){e(!0)})}),this.image.src=URL.createObjectURL(t),a.then(function(){n.$emit("image-load",n.image)});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(p["c"]));b=g["a"]([Object(p["a"])({components:{}})],b);var y=b,k=y,w=(a("c618"),a("2877")),O=Object(w["a"])(k,h,v,!1,null,"1d1526f2",null),j=O.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-radio-group",{on:{change:e.changeLogo},model:{value:e.logo,callback:function(t){e.logo=t},expression:"logo"}},[a("el-radio",{attrs:{border:"",label:"zh"}},[e._v("中文")]),a("el-radio",{attrs:{border:"",label:"en"}},[e._v("English")])],1),a("v-stage",{ref:"stage",staticClass:"horizontal-center",attrs:{config:{width:100,height:100}}},[a("v-layer",[e.finishedLoadImage?a("v-image",{attrs:{config:{width:e.image.naturalWidth,height:e.image.naturalHeight,image:e.image}}}):e._e()],1),a("v-layer",{ref:"logoLayer"})],1)],1)},L=[],x=(a("7514"),a("362d")),S=a.n(x),C=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.finishedLoadImage=!1,e.logo="en",e.oldImageURL="",e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"mounted",value:function(){var e=this;this.stage.on("click tap",function(t){if(!t.target.hasName("logo"))return e.clearTransform(),void e.logoLayer.draw();e.clearTransform(),e.addTransformTo(t.target),e.logoLayer.draw()})}},{key:"onImageChange",value:function(){this.changeLogo(this.logo);var e=this.$refs.stage;e=e.getNode(),this.resizeCanvas(),this.finishedLoadImage=!0}},{key:"resizeCanvas",value:function(){var e=this.$refs.stage;e=e.getNode();var t=this.$el.clientWidth/this.image.naturalWidth;t>1&&(t=1),e.width(this.image.naturalWidth*t),e.height(this.image.naturalHeight*t),e.scale({x:t,y:t}),e.draw()}},{key:"changeLogo",value:function(e){"zh"===e?this.loadLogo(a("5339")):"en"===e&&this.loadLogo(a("d58f"))}},{key:"loadLogo",value:function(e){var t=this,a=new Image;a.addEventListener("load",function(){var e=t.stage.width()/t.stage.scaleX()*.9/a.naturalWidth,n=new S.a.Image({name:"logo",image:a,draggable:!0,x:(t.stage.width()/t.stage.scaleX()-a.naturalWidth*e)/2,y:.9*(t.stage.height()/t.stage.scaleY()-a.naturalHeight*e)});n.scale({x:e,y:e}),t.logoLayer.removeChildren(),t.logoLayer.add(n),t.addTransformTo(n),t.logoLayer.draw()}),a.src=e}},{key:"clearTransform",value:function(){this.stage.find("Transformer").each(function(e){e.destroy()})}},{key:"addTransformTo",value:function(e){var t=new S.a.Transformer;e.getLayer().add(t),t.attachTo(e)}},{key:"renderImage",value:function(){var e=this;""!==this.oldImageURL&&(URL.revokeObjectURL(this.oldImageURL),this.oldImageURL=""),this.clearTransform(),this.stage.scale({x:1,y:1}),this.stage.size({width:this.image.naturalWidth,height:this.image.naturalHeight}),this.stage.draw();var t=new Promise(function(t){var a=e.stage.toCanvas({callback:function(){}});a.toBlob(function(a){var n=URL.createObjectURL(a);e.oldImageURL=n,t(n)})});return t}},{key:"stage",get:function(){var e=this.$refs.stage;return e.getNode()}},{key:"logoLayer",get:function(){var e=this.$refs.logoLayer;return e.getNode()}}]),t}(p["c"]);g["a"]([Object(p["b"])()],C.prototype,"image",void 0),g["a"]([Object(p["d"])("image")],C.prototype,"onImageChange",null),C=g["a"]([Object(p["a"])({components:{}})],C);var I=C,$=I,T=(a("3ccf"),Object(w["a"])($,_,L,!1,null,"d7e396b4",null)),P=T.exports,R=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.currentStep=0,e.image=null,e.outputImage="",e.processing=!1,e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"openImage",value:function(){var e=window.open("about:blank","_blank");e&&e.document.write('<img src="'.concat(this.outputImage,'"></img>'))}},{key:"onPaste",value:function(e){this.$refs.filePicker.pasteImage(e)}},{key:"next",value:function(){var e=this;this.processing=!0,2!==this.nextStep?(this.currentStep<2&&this.currentStep++,this.processing=!1):this.editor.renderImage().then(function(t){e.outputImage=t,e.currentStep++,e.processing=!1})}},{key:"previous",value:function(){var e=this;if(this.processing=!0,1===this.previousStep)return Promise.resolve().then(function(){e.editor.resizeCanvas(),e.processing=!1}),void this.currentStep--;this.currentStep>0&&this.currentStep--,this.processing=!1}},{key:"imageLoad",value:function(e){this.image=e,this.next()}},{key:"editor",get:function(){return this.$refs.editor}},{key:"nextStep",get:function(){return this.currentStep+1}},{key:"previousStep",get:function(){return this.currentStep-1}}]),t}(p["c"]);R=g["a"]([Object(p["a"])({components:{FilePicker:j,KonvaEditor:P}})],R);var E=R,z=E,U=(a("7cce"),Object(w["a"])(z,d,f,!1,null,"4098a05e",null)),N=U.exports,M=function(e){function t(){return Object(s["a"])(this,t),Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"changeLanguage",value:function(e){this.locale=e}},{key:"mounted",value:function(){navigator.languages[0].includes("zh")||navigator.languages[1].includes("zh")?this.changeLanguage("zh-cn"):this.changeLanguage("en")}},{key:"locale",get:function(){return this.$i18n.locale},set:function(e){this.$i18n.locale=e}}]),t}(p["c"]);M=g["a"]([Object(p["a"])({components:{MemeMaker:N}})],M);var D=M,W=D,J=(a("5c0b"),Object(w["a"])(W,r,i,!1,null,null,null)),K=J.exports,A=a("2f62");n["default"].use(A["a"]);var F=new A["a"].Store({state:{},mutations:{},actions:{}}),H=a("5c96"),Q=a.n(H);a("c69f");n["default"].use(Q.a);var V=a("7591"),X=a.n(V),Y=(a("4917"),a("a925"));function B(){var e=a("49f8"),t={};return e.keys().forEach(function(a){var n=a.match(/([A-Za-z0-9-_]+)\./i);if(n&&n.length>1){var r=n[1];t[r]=e(a)}}),t}n["default"].use(Y["a"]);var Z=new Y["a"]({locale:"zh-cn",fallbackLocale:"en",messages:B()});n["default"].use(X.a),n["default"].config.productionTip=!1,new n["default"]({store:F,i18n:Z,render:function(e){return e(K)}}).$mount("#app")},d58f:function(e,t,a){e.exports=a.p+"img/cyberpunk_en.28275215.png"},edd4:function(e){e.exports={app:{footer:"CD PROJEKT®, Cyberpunk®, Cyberpunk 2077® are registered trademarks of CD PROJEKT S.A. © 2019 UnluckyNinja",title:"Cyberpunk 2077 Meme Maker"},steps:{button:{next:"Next >",previous:"< Prvev",save:"Save"},processing:"Finalizing image",step1:"Choose a file",step2:"Edit",step3:"Save & Share"},upload:{click_here:"Click Here",description:"Drag file into this area or {click}. {newline}You can also paste an image here (Ctrl-V)."}}}});
//# sourceMappingURL=app.44e4438f.js.map